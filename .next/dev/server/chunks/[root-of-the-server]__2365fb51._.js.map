{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/malik/Downloads/tech-sales-bible/lib/theirstack.ts"],"sourcesContent":["// TheirStack Job Board API Integration\r\n// Get your free API key at: https://theirstack.com\r\n\r\nexport interface TheirStackJob {\r\n  id: string\r\n  job_title: string\r\n  company_name: string\r\n  company_logo?: string\r\n  location: string\r\n  remote: boolean\r\n  job_url: string\r\n  posted_at: string\r\n  salary_min?: number\r\n  salary_max?: number\r\n  salary_currency?: string\r\n  employment_type?: string\r\n  description?: string\r\n  company_data?: {\r\n    funding_stage?: string\r\n    total_funding?: number\r\n    employee_count?: number\r\n    industry?: string\r\n  }\r\n}\r\n\r\nexport interface TheirStackResponse {\r\n  data: TheirStackJob[]\r\n  total: number\r\n  page: number\r\n  per_page: number\r\n}\r\n\r\nexport interface JobListing {\r\n  id: string\r\n  title: string\r\n  company: string\r\n  companyLogo?: string\r\n  location: string\r\n  description: string\r\n  applyUrl: string\r\n  postedAt: string\r\n  salaryMin?: number\r\n  salaryMax?: number\r\n  salaryCurrency?: string\r\n  type?: string\r\n  remote: boolean\r\n  companyInfo?: {\r\n    fundingStage?: string\r\n    totalFunding?: number\r\n    employeeCount?: number\r\n    industry?: string\r\n  }\r\n}\r\n\r\nconst THEIRSTACK_API_KEY = process.env.THEIRSTACK_API_KEY\r\nconst THEIRSTACK_BASE_URL = \"https://api.theirstack.com/v1\"\r\n\r\nexport async function fetchSalesJobs(options?: {\r\n  page?: number\r\n  perPage?: number\r\n  location?: string\r\n  remoteOnly?: boolean\r\n  searchQuery?: string\r\n}): Promise<{ jobs: JobListing[]; total: number }> {\r\n  const {\r\n    page = 1,\r\n    perPage = 20,\r\n    location,\r\n    remoteOnly = false,\r\n    searchQuery,\r\n  } = options || {}\r\n\r\n  if (!THEIRSTACK_API_KEY) {\r\n    console.warn(\"TheirStack API key not configured\")\r\n    return { jobs: [], total: 0 }\r\n  }\r\n\r\n  try {\r\n    // Build request body for TheirStack\r\n    const body: Record<string, unknown> = {\r\n      page,\r\n      per_page: perPage,\r\n      // Search for sales-related roles at tech companies\r\n      job_title_or: [\r\n        \"Sales Development Representative\",\r\n        \"SDR\",\r\n        \"BDR\",\r\n        \"Business Development Representative\",\r\n        \"Account Executive\",\r\n        \"Inside Sales\",\r\n        \"Sales Representative\",\r\n        \"Enterprise Sales\",\r\n        \"Mid-Market Sales\",\r\n      ],\r\n      posted_at_max_age_days: 30,\r\n      order_by: [{ desc: true, field: \"posted_at\" }],\r\n    }\r\n\r\n    if (location) {\r\n      body.job_location_pattern = location\r\n    }\r\n\r\n    if (remoteOnly) {\r\n      body.remote = true\r\n    }\r\n\r\n    if (searchQuery) {\r\n      body.job_title_pattern = searchQuery\r\n    }\r\n\r\n    const response = await fetch(`${THEIRSTACK_BASE_URL}/jobs/search`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${THEIRSTACK_API_KEY}`,\r\n      },\r\n      body: JSON.stringify(body),\r\n      next: { revalidate: 3600 }, // Cache for 1 hour\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      console.error(\"TheirStack API error:\", response.status, errorText)\r\n      return { jobs: [], total: 0 }\r\n    }\r\n\r\n    const data: TheirStackResponse = await response.json()\r\n\r\n    // Transform to our format\r\n    const jobs: JobListing[] = data.data.map((job) => ({\r\n      id: job.id,\r\n      title: job.job_title,\r\n      company: job.company_name,\r\n      companyLogo: job.company_logo,\r\n      location: job.location || (job.remote ? \"Remote\" : \"Unknown\"),\r\n      description: job.description || \"\",\r\n      applyUrl: job.job_url,\r\n      postedAt: job.posted_at,\r\n      salaryMin: job.salary_min,\r\n      salaryMax: job.salary_max,\r\n      salaryCurrency: job.salary_currency || \"USD\",\r\n      type: job.employment_type || \"full_time\",\r\n      remote: job.remote,\r\n      companyInfo: job.company_data\r\n        ? {\r\n            fundingStage: job.company_data.funding_stage,\r\n            totalFunding: job.company_data.total_funding,\r\n            employeeCount: job.company_data.employee_count,\r\n            industry: job.company_data.industry,\r\n          }\r\n        : undefined,\r\n    }))\r\n\r\n    return { jobs, total: data.total }\r\n  } catch (error) {\r\n    console.error(\"Error fetching jobs:\", error)\r\n    return { jobs: [], total: 0 }\r\n  }\r\n}\r\n\r\nexport function formatSalary(min?: number, max?: number, currency = \"USD\"): string | null {\r\n  if (!min && !max) return null\r\n\r\n  const formatNum = (n: number) => {\r\n    if (n >= 1000000) {\r\n      return `${(n / 1000000).toFixed(1)}M`\r\n    }\r\n    if (n >= 1000) {\r\n      return `${Math.round(n / 1000)}K`\r\n    }\r\n    return n.toString()\r\n  }\r\n\r\n  const symbol = currency === \"USD\" ? \"$\" : currency\r\n\r\n  if (min && max) {\r\n    return `${symbol}${formatNum(min)} - ${symbol}${formatNum(max)}`\r\n  }\r\n  if (min) {\r\n    return `${symbol}${formatNum(min)}+`\r\n  }\r\n  if (max) {\r\n    return `Up to ${symbol}${formatNum(max)}`\r\n  }\r\n  return null\r\n}\r\n\r\nexport function formatPostedDate(dateString: string): string {\r\n  const date = new Date(dateString)\r\n  const now = new Date()\r\n  const diffMs = now.getTime() - date.getTime()\r\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24))\r\n\r\n  if (diffDays === 0) return \"Today\"\r\n  if (diffDays === 1) return \"Yesterday\"\r\n  if (diffDays < 7) return `${diffDays} days ago`\r\n  if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`\r\n  return `${Math.floor(diffDays / 30)} months ago`\r\n}\r\n\r\nexport function formatFunding(amount?: number): string | null {\r\n  if (!amount) return null\r\n  if (amount >= 1000000000) {\r\n    return `$${(amount / 1000000000).toFixed(1)}B raised`\r\n  }\r\n  if (amount >= 1000000) {\r\n    return `$${Math.round(amount / 1000000)}M raised`\r\n  }\r\n  if (amount >= 1000) {\r\n    return `$${Math.round(amount / 1000)}K raised`\r\n  }\r\n  return null\r\n}\r\n\r\nexport function formatEmployeeCount(count?: number): string | null {\r\n  if (!count) return null\r\n  if (count >= 10000) return \"10,000+ employees\"\r\n  if (count >= 1000) return `${Math.round(count / 1000)}K+ employees`\r\n  if (count >= 500) return \"500+ employees\"\r\n  if (count >= 100) return \"100+ employees\"\r\n  if (count >= 50) return \"50+ employees\"\r\n  return `${count} employees`\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/malik/Downloads/tech-sales-bible/app/api/jobs/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { fetchSalesJobs } from \"@/lib/theirstack\"\r\n\r\nexport async function GET(request: NextRequest) {\r\n  const searchParams = request.nextUrl.searchParams\r\n\r\n  const page = parseInt(searchParams.get(\"page\") || \"1\")\r\n  const location = searchParams.get(\"location\") || undefined\r\n  const remoteOnly = searchParams.get(\"remote\") === \"true\"\r\n  const searchQuery = searchParams.get(\"q\") || undefined\r\n\r\n  try {\r\n    const { jobs, total } = await fetchSalesJobs({\r\n      page,\r\n      location,\r\n      remoteOnly,\r\n      searchQuery,\r\n      perPage: 20,\r\n    })\r\n\r\n    return NextResponse.json({\r\n      jobs,\r\n      total,\r\n      page,\r\n      hasMore: page * 20 < total,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"Jobs API error:\", error)\r\n    return NextResponse.json(\r\n      { error: \"Failed to fetch jobs\" },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IAEjD,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;IAClD,MAAM,WAAW,aAAa,GAAG,CAAC,eAAe;IACjD,MAAM,aAAa,aAAa,GAAG,CAAC,cAAc;IAClD,MAAM,cAAc,aAAa,GAAG,CAAC,QAAQ;IAE7C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,4KAAc,EAAC;YAC3C;YACA;YACA;YACA;YACA,SAAS;QACX;QAEA,OAAO,uLAAY,CAAC,IAAI,CAAC;YACvB;YACA;YACA;YACA,SAAS,OAAO,KAAK;QACvB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,uLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}